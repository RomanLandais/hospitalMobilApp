"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9657],{9657:(V,h,d)=>{d.r(h),d.d(h,{ConsultationComponent:()=>U});var F=d(177),r=d(4341),s=d(7863),E=d(6657),e=d(4438),D=d(2205);function S(n,o){if(1&n&&(e.j41(0,"ion-select-option",25),e.EFF(1),e.k0s()),2&n){const a=o.$implicit;e.Y8G("value",a.id),e.R7$(),e.SpI(" ",a.displayName," ")}}function b(n,o){1&n&&(e.j41(0,"ion-item",26)(1,"ion-text",27),e.EFF(2," Veuillez s\xe9lectionner un patient. "),e.k0s()())}function k(n,o){if(1&n&&(e.j41(0,"ion-select-option",25),e.EFF(1),e.k0s()),2&n){const a=o.$implicit;e.Y8G("value",a.id),e.R7$(),e.SpI(" ",a.displayDate," ")}}function j(n,o){1&n&&(e.j41(0,"ion-item",26)(1,"ion-text",27),e.EFF(2," Veuillez s\xe9lectionner un s\xe9jour. "),e.k0s()())}function y(n,o){if(1&n&&(e.j41(0,"ion-select-option",25),e.EFF(1),e.k0s()),2&n){const a=o.$implicit;e.Y8G("value",a.id),e.R7$(),e.SpI(" Dr. ",a.displayName," ")}}function M(n,o){1&n&&(e.j41(0,"ion-item",26)(1,"ion-text",27),e.EFF(2," Veuillez s\xe9lectionner un m\xe9decin. "),e.k0s()())}function N(n,o){1&n&&(e.j41(0,"ion-item",26)(1,"ion-text",27),e.EFF(2," Veuillez s\xe9lectionner un titre. "),e.k0s()())}function R(n,o){1&n&&(e.j41(0,"ion-item",26)(1,"ion-text",27),e.EFF(2," Veuillez s\xe9lectionner une date. "),e.k0s()())}function I(n,o){1&n&&(e.j41(0,"ion-item",26)(1,"ion-text",27),e.EFF(2," Veuillez s\xe9lectionner une description. "),e.k0s()())}function G(n,o){1&n&&(e.j41(0,"ion-item",26)(1,"ion-text",27),e.EFF(2," Veuillez s\xe9lectionner un medicament. "),e.k0s()())}function T(n,o){1&n&&(e.j41(0,"ion-item",26)(1,"ion-text",27),e.EFF(2," Veuillez s\xe9lectionner une Posologie. "),e.k0s()())}function Y(n,o){if(1&n&&e.nrm(0,"ion-datetime",28),2&n){const a=e.XpG();e.Y8G("value",a.currentDate)}}function P(n,o){1&n&&(e.j41(0,"ion-item",26)(1,"ion-text",27),e.EFF(2," Veuillez s\xe9lectionner une date. "),e.k0s()())}function $(n,o){if(1&n&&e.nrm(0,"ion-datetime",29),2&n){const a=e.XpG();e.Y8G("value",a.endDate)}}function O(n,o){1&n&&(e.j41(0,"ion-item",26)(1,"ion-text",27),e.EFF(2," Veuillez s\xe9lectionner une date. "),e.k0s()())}let U=(()=>{var n;class o{constructor(i,t){this.fb=i,this.comServiceService=t,this.nomsPatients=[],this.nomsDoctors=[],this.dateStay=[]}ngOnInit(){this.loadUser(),this.loadDoctors(),this.loadStay();let i=new Date;i.setHours(14),this.currentDate=i.toISOString();const t=new Date;t.setDate(t.getDate()+3),this.endDate=t.toISOString(),this.avisForm=this.fb.group({titre:["",r.k0.required],date:[this.currentDate,r.k0.required],description:["",r.k0.required]}),this.prescriptionForm=this.fb.group({medicament:["",r.k0.required],posologie:["",r.k0.required],dateDebut:[this.currentDate,r.k0.required],dateFin:[this.endDate,r.k0.required],soigne:[!1,r.k0.required]})}loadUser(){this.comServiceService.getData("loadUsers").subscribe(i=>{i.users&&Array.isArray(i.users)?this.nomsPatients=i.users.map(t=>({id:t.id_user,displayName:`${t.last_name} ${t.name}`})):console.error("Invalid data format: user property is missing or not an array")})}loadStay(){this.comServiceService.getData("loadStay").subscribe(i=>{i.users&&Array.isArray(i.users)?this.dateStay=i.users.filter(t=>t.id_user===this.idUser).map(t=>({id:t.id_stay,displayDate:t.start_date,id_user:t.id_user})):console.error("Invalid data format: stay property is missing or not an array",i)})}onUserChange(){this.idUser&&this.loadStay()}loadDoctors(){this.comServiceService.getData("loadDoctors").subscribe(i=>{i.doctors&&Array.isArray(i.doctors)?this.nomsDoctors=i.doctors.map(t=>({id:t.id_doctor,displayName:`${t.last_name} ${t.name}`})):console.error("Invalid data format: doctors property is missing or not an array")})}onAvisSubmit(){if(this.avisForm.valid){const i=this.avisForm.value;i.idUser=this.idUser,i.idDoctor=this.idDoctor,i.idStay=this.idStay,this.comServiceService.sendData(this.avisForm.value,"Avis").subscribe({next:()=>{alert("Votre avis a \xe9t\xe9 enregistr\xe9e")},error:t=>{console.error("There was an error!",t)}})}}onPrescriptionSubmit(){if(this.prescriptionForm.valid){const i=this.prescriptionForm.value;i.idUser=this.idUser,i.idDoctor=this.idDoctor,i.idStay=this.idStay,this.comServiceService.sendData(this.prescriptionForm.value,"Prescription").subscribe({next:()=>{alert("Votre prescription a \xe9t\xe9 enregistr\xe9e")},error:t=>{console.error("There was an error!",t)}})}}}return(n=o).\u0275fac=function(i){return new(i||n)(e.rXU(r.ok),e.rXU(D._))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-consultation"]],standalone:!0,features:[e.aNF],decls:83,vars:24,consts:[["patientSelect","ngModel"],["staySelect","ngModel"],["doctorSelect","ngModel"],[1,"ion-padding",3,"fullscreen"],[1,"container-parent"],[1,"form-container"],["placeholder","S\xe9lectionner un patient","interface","popover","required","","interface","popover",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],["placeholder","S\xe9lectionner un s\xe9jour","interface","popover","required","","interface","popover",3,"ngModelChange","ngModel"],["placeholder","S\xe9lectionner un m\xe9decin","interface","popover","required","","interface","popover",3,"ngModelChange","ngModel"],[1,"avis-form",3,"ngSubmit","formGroup"],[1,"input-container"],["position","stacked"],["type","text","formControlName","titre","placeholder","donnez un titre","required",""],["presentation","date-time","formControlName","date","required","",3,"preferWheel"],["formControlName","description","placeholder","\xe9crivez votre avis sur le patient","required",""],["type","submit","expand","block",3,"disabled"],[1,"prescription-form",3,"ngSubmit","formGroup"],["type","text","formControlName","medicament","placeholder","Nom des m\xe9dicaments","required",""],["type","text","formControlName","posologie","placeholder","Posologie","required",""],["datetime","datetimeDebut"],[3,"keepContentsMounted"],["datetime","datetimeFin"],["formControlName","soigne"],[3,"value"],["lines","none"],["color","danger","slot","end"],["id","datetimeDebut","presentation","date","formControlName","dateDebut","required","",3,"value"],["id","datetimeFin","presentation","date","formControlName","dateFin","required","",3,"value"]],template:function(i,t){if(1&i){const m=e.RV6();e.j41(0,"ion-content",3)(1,"div",4)(2,"div",5)(3,"ion-list")(4,"ion-item")(5,"ion-select",6,0),e.mxI("ngModelChange",function(l){return e.eBV(m),e.DH7(t.idUser,l)||(t.idUser=l),e.Njj(l)}),e.bIt("ngModelChange",function(){return e.eBV(m),e.Njj(t.onUserChange())}),e.DNE(7,S,2,2,"ion-select-option",7),e.k0s()(),e.DNE(8,b,3,0,"ion-item",8),e.k0s()(),e.j41(9,"div",5)(10,"ion-list")(11,"ion-item")(12,"ion-select",9,1),e.mxI("ngModelChange",function(l){return e.eBV(m),e.DH7(t.idStay,l)||(t.idStay=l),e.Njj(l)}),e.DNE(14,k,2,2,"ion-select-option",7),e.k0s()(),e.DNE(15,j,3,0,"ion-item",8),e.k0s()()(),e.j41(16,"div",4)(17,"div",5)(18,"ion-list")(19,"ion-item")(20,"ion-select",10,2),e.mxI("ngModelChange",function(l){return e.eBV(m),e.DH7(t.idDoctor,l)||(t.idDoctor=l),e.Njj(l)}),e.DNE(22,y,2,2,"ion-select-option",7),e.k0s()(),e.DNE(23,M,3,0,"ion-item",8),e.k0s()()(),e.j41(24,"div",5)(25,"form",11),e.bIt("ngSubmit",function(){return e.eBV(m),e.Njj(t.onAvisSubmit())}),e.j41(26,"h4"),e.EFF(27,"Ajouter un Avis"),e.k0s(),e.j41(28,"ion-item",12)(29,"ion-label",13),e.EFF(30,"Titre de l'avis"),e.k0s(),e.nrm(31,"ion-input",14),e.k0s(),e.DNE(32,N,3,0,"ion-item",8),e.j41(33,"ion-item",12)(34,"ion-label",13),e.EFF(35,"Date"),e.k0s(),e.nrm(36,"br")(37,"ion-datetime",15),e.k0s(),e.DNE(38,R,3,0,"ion-item",8),e.j41(39,"ion-item",12)(40,"ion-label",13),e.EFF(41,"Description"),e.k0s(),e.nrm(42,"ion-textarea",16),e.k0s(),e.DNE(43,I,3,0,"ion-item",8),e.j41(44,"ion-button",17),e.EFF(45," Enregistrer l'avis "),e.k0s()()(),e.j41(46,"div",5)(47,"form",18),e.bIt("ngSubmit",function(){return e.eBV(m),e.Njj(t.onPrescriptionSubmit())}),e.j41(48,"h4"),e.EFF(49,"Ajouter une Prescription"),e.k0s(),e.j41(50,"ion-item",12)(51,"ion-label",13),e.EFF(52,"M\xe9dicament"),e.k0s(),e.nrm(53,"ion-input",19),e.k0s(),e.DNE(54,G,3,0,"ion-item",8),e.j41(55,"ion-item",12)(56,"ion-label",13),e.EFF(57,"Posologie"),e.k0s(),e.nrm(58,"ion-input",20),e.k0s(),e.DNE(59,T,3,0,"ion-item",8),e.j41(60,"ion-item",12)(61,"ion-label",13),e.EFF(62,"Date d\xe9but traitement"),e.k0s(),e.nrm(63,"br")(64,"ion-datetime-button",21),e.j41(65,"ion-modal",22),e.DNE(66,Y,1,1,"ng-template"),e.k0s(),e.nrm(67,"br"),e.k0s(),e.DNE(68,P,3,0,"ion-item",8),e.j41(69,"ion-item",12)(70,"ion-label",13),e.EFF(71,"Date fin traitement"),e.k0s(),e.nrm(72,"br")(73,"ion-datetime-button",23),e.j41(74,"ion-modal",22),e.DNE(75,$,1,1,"ng-template"),e.k0s(),e.nrm(76,"br"),e.k0s(),e.DNE(77,O,3,0,"ion-item",8),e.j41(78,"ion-item",12)(79,"ion-checkbox",24),e.EFF(80,"Soign\xe9 ?"),e.k0s()(),e.j41(81,"ion-button",17),e.EFF(82," Enregistrer la prescription "),e.k0s()()()()}if(2&i){let m,u,l,c,p,_,g;const f=e.sdS(6),v=e.sdS(13),C=e.sdS(21);e.Y8G("fullscreen",!0),e.R7$(5),e.R50("ngModel",t.idUser),e.R7$(2),e.Y8G("ngForOf",t.nomsPatients),e.R7$(),e.Y8G("ngIf",f.invalid&&f.touched),e.R7$(4),e.R50("ngModel",t.idStay),e.R7$(2),e.Y8G("ngForOf",t.dateStay),e.R7$(),e.Y8G("ngIf",v.invalid&&v.touched),e.R7$(5),e.R50("ngModel",t.idDoctor),e.R7$(2),e.Y8G("ngForOf",t.nomsDoctors),e.R7$(),e.Y8G("ngIf",C.invalid&&C.touched),e.R7$(2),e.Y8G("formGroup",t.avisForm),e.R7$(7),e.Y8G("ngIf",(null==(m=t.avisForm.get("titre"))?null:m.invalid)&&(null==(m=t.avisForm.get("titre"))?null:m.touched)),e.R7$(5),e.Y8G("preferWheel",!0),e.R7$(),e.Y8G("ngIf",(null==(u=t.avisForm.get("date"))?null:u.invalid)&&(null==(u=t.avisForm.get("date"))?null:u.touched)),e.R7$(5),e.Y8G("ngIf",(null==(l=t.avisForm.get("description"))?null:l.invalid)&&(null==(l=t.avisForm.get("description"))?null:l.touched)),e.R7$(),e.Y8G("disabled",t.avisForm.invalid||!f.valid||!v.valid||!C.valid),e.R7$(3),e.Y8G("formGroup",t.prescriptionForm),e.R7$(7),e.Y8G("ngIf",(null==(c=t.prescriptionForm.get("medicament"))?null:c.invalid)&&(null==(c=t.prescriptionForm.get("medicament"))?null:c.touched)),e.R7$(5),e.Y8G("ngIf",(null==(p=t.prescriptionForm.get("posologie"))?null:p.invalid)&&(null==(p=t.prescriptionForm.get("posologie"))?null:p.touched)),e.R7$(6),e.Y8G("keepContentsMounted",!0),e.R7$(3),e.Y8G("ngIf",(null==(_=t.prescriptionForm.get("dateDebut"))?null:_.invalid)&&(null==(_=t.prescriptionForm.get("dateDebut"))?null:_.touched)),e.R7$(6),e.Y8G("keepContentsMounted",!0),e.R7$(3),e.Y8G("ngIf",(null==(g=t.prescriptionForm.get("dateFin"))?null:g.invalid)&&(null==(g=t.prescriptionForm.get("dateFin"))?null:g.touched)),e.R7$(4),e.Y8G("disabled",t.prescriptionForm.invalid||!f.valid||!v.valid||!C.valid)}},dependencies:[F.MD,F.Sq,F.bT,s.bv,s.Jm,s.eY,s.W9,s.A9,s.K4,s.$w,s.uz,s.he,s.nf,s.Nm,s.Ip,s.IO,s.nc,s.Sb,s.hB,s.Je,s.Gw,r.X1,r.qT,r.BC,r.cb,r.YS,r.j4,r.JD,E.D,r.YN,r.vS],styles:[".container-parent[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:15px}h4[_ngcontent-%COMP%]{text-align:center}.avis-form[_ngcontent-%COMP%], .prescription-form[_ngcontent-%COMP%]{width:100%;max-width:400px}.input-container[_ngcontent-%COMP%]{margin-bottom:15px}"]}),o})()}}]);